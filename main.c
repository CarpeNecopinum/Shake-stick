 /**********************************************************
程序名称：容易制作的16只LED发光管摇摇棒
简要说明：外部中断方式INT0显示；取模方式：纵向取模、字节倒序
电子小制作优选制作题材
**********************************************************/
#include <AT89X52.h>
#define uchar unsigned char
#define uint unsigned int    //宏定义
#define KEY P3^0      //定义画面切换按键
uchar KY;      //KY作用在后面说明     
uchar disp;     //显示汉字指针
uchar pic=0,num=0;     //pic为按键次数；num为中断次数

uchar code love[] = {
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFE,0x3F,0x00,0x20,0x00,0x20,0x00,0x20,
0x00,0x20,0x00,0x20,0x00,0x20,0x00,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0xF8,0x0F,
0x04,0x10,0x02,0x20,0x02,0x20,0x02,0x20,0x02,0x20,0x04,0x10,0xF8,0x0F,0x00,0x00,
0x00,0x00,0x00,0x00,0xFE,0x07,0x00,0x08,0x00,0x10,0x00,0x20,0x00,0x20,0x00,0x10,
0x00,0x08,0xFE,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0xFE,0x3F,0x82,0x20,0x82,0x20,
0x82,0x20,0x82,0x20,0x82,0x20,0x82,0x20,0x82,0x20,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*LOVE*/
};

uchar code loveyou[] = {
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x78,0x00,0xFC,0x00,0xFE,0x01,0xFE,0x03,0xFE,0x07,0xFE,0x0F,0xFE,0x1F,0xFC,0x3F,
0xF8,0x7F,0xFC,0x3F,0xFE,0x1F,0xFE,0x0F,0xFE,0x07,0xFE,0x03,0xFE,0x01,0xFC,0x00,
0x78,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*心形图案*/
};

uchar code hehe[] = {
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0x01,0x40,0x01,0xC0,0x01,0x00,0x00,0x00,0x00,
0xF0,0x0F,0x08,0x10,0x04,0x20,0x00,0x00,0x00,0x00,0xF0,0x3F,0x08,0x00,0x04,0x00,
0x04,0x00,0x04,0x00,0x08,0x00,0xF0,0x3F,0x00,0x00,0x00,0x00,0x00,0x20,0x00,0x20,
0x00,0x20,0x00,0x20,0x00,0x20,0x00,0x00,0x00,0x00,0xF0,0x3F,0x08,0x00,0x04,0x00,
0x04,0x00,0x04,0x00,0x08,0x00,0xF0,0x3F,0x00,0x00,0x00,0x00,0x04,0x20,0x08,0x10,
0xF0,0x0F,0x00,0x00,0x00,0x00,0xC0,0x01,0x40,0x01,0xC0,0x01,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*呵呵o(∩_∩)o图案*/
};

unsigned char code hanzi[] = {
/*--  文字:  祝  --*/
0x00,0x20,0x20,0x22,0x2E,0xEC,0xEC,0x60,
0xFC,0xFC,0xFC,0x04,0x04,0x04,0x04,0xFC,
0xFC,0xFC,0x00,0x00,0x20,0x30,0x18,0x0E,
0xFF,0xFF,0x1F,0x1C,0x0B,0x83,0xFF,0xFF,
0x3F,0xFF,0xFF,0x03,0x03,0xE3,0xE0,0x00,

/*--  文字:  新  --*/
0x80,0x88,0x98,0xF8,0xEA,0xEE,0xCE,0xFC,
0xB8,0x98,0x88,0xFC,0xFC,0xFC,0x84,0x84,
0x86,0x86,0x84,0x80,0x00,0x08,0xC8,0xE8,
0x68,0xFF,0xFF,0xFF,0xE8,0xC8,0xC8,0xFF,
0x7F,0x07,0x00,0xFF,0xFF,0x00,0x00,0x00,


/*--  文字:  新  --*/
0x80,0x88,0x98,0xF8,0xEA,0xEE,0xCE,0xFC,
0xB8,0x98,0x88,0xFC,0xFC,0xFC,0x84,0x84,
0x86,0x86,0x84,0x80,0x00,0x08,0xC8,0xE8,
0x68,0xFF,0xFF,0xFF,0xE8,0xC8,0xC8,0xFF,
0x7F,0x07,0x00,0xFF,0xFF,0x00,0x00,0x00,

/*--  文字:  妹  --*/
0x20,0x20,0xA0,0xFC,0xFE,0x3E,0xE2,0xE0,
0x70,0x10,0x10,0x10,0xFE,0xFE,0x12,0x10,
0x10,0x10,0x10,0x00,0x00,0x1C,0x1F,0xBF,
0xE1,0xFC,0xFF,0xCF,0xC1,0xE1,0x79,0x3F,
0xFF,0xFF,0x1F,0x79,0xE1,0xC1,0x81,0x01,



/*--  文字:  儿  --*/
0x00,0x00,0x00,0x00,0x00,0x00,0xFC,0xFC,
0xFC,0x00,0x00,0xFC,0xFC,0xFC,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0xC0,0xF0,0x7F,0x3F,0x00,0x00,0x00,0xFF,
0xFF,0xFF,0x00,0x00,0x00,0xF0,0xF0,0x00,


/*--  文字:  生  --*/
0x00,0x00,0x00,0xE0,0xF8,0x78,0x58,0x40,
0x40,0xFE,0xFE,0x42,0x40,0x40,0x40,0x60,
0x60,0x40,0x00,0x00,0x00,0x0C,0x0F,0x0B,
0x09,0x08,0x08,0x08,0x08,0xFF,0xFF,0x08,
0x08,0x08,0x0C,0x0C,0x08,0x00,0x00,0x00,


/*--  文字:  日  --*/
0x00,0x00,0x00,0x06,0xFE,0xFE,0x02,0x02,
0x02,0x02,0x02,0x02,0x02,0x02,0xFE,0xFE,
0xFC,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0xFF,0xFF,0x81,0x81,0x81,0x81,0x81,0x81,
0x81,0x81,0xFF,0xFF,0xFF,0x00,0x00,0x00,


/*--  文字:  快  --*/
0x00,0x80,0xC0,0xFE,0xFE,0xFE,0xC0,0xD0,
0x10,0x10,0xFE,0xFE,0xFE,0x10,0x10,0xF0,
0xF0,0x10,0x00,0x00,0x02,0x03,0x03,0xFF,
0xFF,0xFF,0x05,0x05,0x84,0xE4,0xFF,0x3F,
0x3F,0xFC,0xE4,0x87,0x07,0x04,0x04,0x04,


/*--  文字:  乐  --*/
0x00,0x00,0x00,0xF0,0xFC,0xFC,0x0C,0x04,
0x04,0x04,0xF4,0xF4,0x14,0x06,0x06,0x06,
0x84,0x80,0x00,0x00,0x00,0x00,0x81,0xC3,
0xE3,0x71,0x3D,0x1D,0x09,0x01,0xFF,0xFF,
0x09,0x19,0x39,0xF1,0xE1,0xC1,0x01,0x00,


/*--  文字:  哦  --*/
0x00,0xF8,0xF8,0x08,0xF8,0xF8,0xF8,0x48,
0xFC,0xFC,0xFE,0x46,0x7E,0xFE,0xFE,0x4C,
0x58,0x58,0x40,0x40,0x00,0x7F,0x7F,0x08,
0x1F,0x1F,0x1F,0x18,0xFF,0xFF,0xFF,0x86,
0xC2,0xFF,0x7F,0xFE,0xCF,0xC7,0xC2,0x00,

//-- ！ --
0x00,0x00,0x00,0x00,0x78,0xF8,0xF8,0xF8,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0xE0,0xEF,0xEF,0xE1,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

//-- ！ --
0x00,0x00,0x00,0x00,0x78,0xF8,0xF8,0xF8,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0xE0,0xEF,0xEF,0xE1,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,

};

/*****函数声明*****/
void display1(void);
void display2(void);
void display3(void);
void display4(void);

/*****n（us）延时子程序*****/
void DelayUs(uint N)
{
uint x;
for(x=0; x<=N;x++);
}

/*****中断服务程序*****/
void intersvr0(void) interrupt 0 using 1
{
KY=~KY;      //每个摇动来回水银开关会在摆幅两端分别产生下降沿中断，只提取其中一次（从左向右摇才显示）
if(KY==0)
{
  num++;     //计算中断次数
  switch(pic)      //选择画面
  {
   case 0:{display1();}break;
   case 1:{display2();}break;
   case 2:{display3();}break;
   case 3:{display4();}break;
   default:{display1();}  
  }
    }
}

/*****显示子程序1（汉字）*****/
void display1(void)
{
uchar i;
if(num>10){disp++;num=0;}     //12个汉字分为3次显示完（每次显示4个），每中断10次切换
if(disp>2)disp=0;
  DelayUs(5200);     //此处延时时间依各硬件差别而各不相同，试着调整使得显示内容居中即可
for(i=0;i<64;i++)
{
     P0=~hanzi[disp*160+i*2];
     P2=~hanzi[disp*160+i*2+1];
     DelayUs(100);
}
}

/*****显示子程序2（LOVE）*****/
void display2(void)
{
uchar i;
DelayUs(4000);
for(i=0;i<64;i++)
{
     P0=~love[i*2];
     P2=~love[i*2+1];
     DelayUs(120);
}
}

/*****显示子程序3（心形图案）*****/
void display3(void)
{
uchar i;
  DelayUs(4000);
for(i=0;i<64;i++)
{
     P0=~loveyou[i*2];
     P2=~loveyou[i*2+1];
     DelayUs(120);
}
}

/*****显示子程序4（呵呵o(∩_∩)o图案）*****/
void display4(void)
{
uchar i;
DelayUs(4000);
for(i=0;i<64;i++)
{
     P0=~hehe[i*2];
     P2=~hehe[i*2+1];
     DelayUs(120);
}
}

/*****主函数*****/
void main(void)
{
IT0=1;
EX0=1; 
EA=1;      //开中断，下降沿中断
KY=0;
while(1)     //主程序中只检测按键
{
  if(KEY==0)     //画面切换键按下
  {
  DelayUs(10000);     //按键去抖
  if(KEY==0);
  pic++;}
  if(pic>3)pic=0;
}
}