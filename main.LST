C51 COMPILER V9.01   MAIN                                                                  07/20/2017 17:00:55 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: F:\工具软件\KEIL\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1           /**********************************************************
   2          程序名称：容易制作的16只LED发光管摇摇棒
   3          简要说明：外部中断方式INT0显示；取模方式：纵向取模、字节倒序
   4          电子小制作优选制作题材
   5          **********************************************************/
   6          #include <AT89X52.h>
   7          #define uchar unsigned char
   8          #define uint unsigned int    //宏定义
   9          #define KEY P3^0      //定义画面切换按键
  10          uchar KY;      //KY作用在后面说明     
  11          uchar disp;     //显示汉字指针
  12          uchar pic=0,num=0;     //pic为按键次数；num为中断次数
  13          
  14          uchar code love[] = {
  15          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  16          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xFE,0x3F,0x00,0x20,0x00,0x20,0x00,0x20,
  17          0x00,0x20,0x00,0x20,0x00,0x20,0x00,0x20,0x00,0x00,0x00,0x00,0x00,0x00,0xF8,0x0F,
  18          0x04,0x10,0x02,0x20,0x02,0x20,0x02,0x20,0x02,0x20,0x04,0x10,0xF8,0x0F,0x00,0x00,
  19          0x00,0x00,0x00,0x00,0xFE,0x07,0x00,0x08,0x00,0x10,0x00,0x20,0x00,0x20,0x00,0x10,
  20          0x00,0x08,0xFE,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0xFE,0x3F,0x82,0x20,0x82,0x20,
  21          0x82,0x20,0x82,0x20,0x82,0x20,0x82,0x20,0x82,0x20,0x00,0x00,0x00,0x00,0x00,0x00,
  22          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*LOVE*/
  23          };
  24          
  25          uchar code loveyou[] = {
  26          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  27          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  28          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  29          0x78,0x00,0xFC,0x00,0xFE,0x01,0xFE,0x03,0xFE,0x07,0xFE,0x0F,0xFE,0x1F,0xFC,0x3F,
  30          0xF8,0x7F,0xFC,0x3F,0xFE,0x1F,0xFE,0x0F,0xFE,0x07,0xFE,0x03,0xFE,0x01,0xFC,0x00,
  31          0x78,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  32          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  33          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*心形图案*/
  34          };
  35          
  36          uchar code hehe[] = {
  37          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  38          0x00,0x00,0x00,0x00,0x00,0x00,0xC0,0x01,0x40,0x01,0xC0,0x01,0x00,0x00,0x00,0x00,
  39          0xF0,0x0F,0x08,0x10,0x04,0x20,0x00,0x00,0x00,0x00,0xF0,0x3F,0x08,0x00,0x04,0x00,
  40          0x04,0x00,0x04,0x00,0x08,0x00,0xF0,0x3F,0x00,0x00,0x00,0x00,0x00,0x20,0x00,0x20,
  41          0x00,0x20,0x00,0x20,0x00,0x20,0x00,0x00,0x00,0x00,0xF0,0x3F,0x08,0x00,0x04,0x00,
  42          0x04,0x00,0x04,0x00,0x08,0x00,0xF0,0x3F,0x00,0x00,0x00,0x00,0x04,0x20,0x08,0x10,
  43          0xF0,0x0F,0x00,0x00,0x00,0x00,0xC0,0x01,0x40,0x01,0xC0,0x01,0x00,0x00,0x00,0x00,
  44          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,/*呵呵o(∩_∩)o图案*/
  45          };
  46          
  47          unsigned char code hanzi[] = {
  48          /*--  文字:  祝  --*/
  49          0x00,0x20,0x20,0x22,0x2E,0xEC,0xEC,0x60,
  50          0xFC,0xFC,0xFC,0x04,0x04,0x04,0x04,0xFC,
  51          0xFC,0xFC,0x00,0x00,0x20,0x30,0x18,0x0E,
  52          0xFF,0xFF,0x1F,0x1C,0x0B,0x83,0xFF,0xFF,
  53          0x3F,0xFF,0xFF,0x03,0x03,0xE3,0xE0,0x00,
  54          
  55          /*--  文字:  新  --*/
C51 COMPILER V9.01   MAIN                                                                  07/20/2017 17:00:55 PAGE 2   

  56          0x80,0x88,0x98,0xF8,0xEA,0xEE,0xCE,0xFC,
  57          0xB8,0x98,0x88,0xFC,0xFC,0xFC,0x84,0x84,
  58          0x86,0x86,0x84,0x80,0x00,0x08,0xC8,0xE8,
  59          0x68,0xFF,0xFF,0xFF,0xE8,0xC8,0xC8,0xFF,
  60          0x7F,0x07,0x00,0xFF,0xFF,0x00,0x00,0x00,
  61          
  62          
  63          /*--  文字:  新  --*/
  64          0x80,0x88,0x98,0xF8,0xEA,0xEE,0xCE,0xFC,
  65          0xB8,0x98,0x88,0xFC,0xFC,0xFC,0x84,0x84,
  66          0x86,0x86,0x84,0x80,0x00,0x08,0xC8,0xE8,
  67          0x68,0xFF,0xFF,0xFF,0xE8,0xC8,0xC8,0xFF,
  68          0x7F,0x07,0x00,0xFF,0xFF,0x00,0x00,0x00,
  69          
  70          /*--  文字:  妹  --*/
  71          0x20,0x20,0xA0,0xFC,0xFE,0x3E,0xE2,0xE0,
  72          0x70,0x10,0x10,0x10,0xFE,0xFE,0x12,0x10,
  73          0x10,0x10,0x10,0x00,0x00,0x1C,0x1F,0xBF,
  74          0xE1,0xFC,0xFF,0xCF,0xC1,0xE1,0x79,0x3F,
  75          0xFF,0xFF,0x1F,0x79,0xE1,0xC1,0x81,0x01,
  76          
  77          
  78          
  79          /*--  文字:  儿  --*/
  80          0x00,0x00,0x00,0x00,0x00,0x00,0xFC,0xFC,
  81          0xFC,0x00,0x00,0xFC,0xFC,0xFC,0x00,0x00,
  82          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  83          0xC0,0xF0,0x7F,0x3F,0x00,0x00,0x00,0xFF,
  84          0xFF,0xFF,0x00,0x00,0x00,0xF0,0xF0,0x00,
  85          
  86          
  87          /*--  文字:  生  --*/
  88          0x00,0x00,0x00,0xE0,0xF8,0x78,0x58,0x40,
  89          0x40,0xFE,0xFE,0x42,0x40,0x40,0x40,0x60,
  90          0x60,0x40,0x00,0x00,0x00,0x0C,0x0F,0x0B,
  91          0x09,0x08,0x08,0x08,0x08,0xFF,0xFF,0x08,
  92          0x08,0x08,0x0C,0x0C,0x08,0x00,0x00,0x00,
  93          
  94          
  95          /*--  文字:  日  --*/
  96          0x00,0x00,0x00,0x06,0xFE,0xFE,0x02,0x02,
  97          0x02,0x02,0x02,0x02,0x02,0x02,0xFE,0xFE,
  98          0xFC,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  99          0xFF,0xFF,0x81,0x81,0x81,0x81,0x81,0x81,
 100          0x81,0x81,0xFF,0xFF,0xFF,0x00,0x00,0x00,
 101          
 102          
 103          /*--  文字:  快  --*/
 104          0x00,0x80,0xC0,0xFE,0xFE,0xFE,0xC0,0xD0,
 105          0x10,0x10,0xFE,0xFE,0xFE,0x10,0x10,0xF0,
 106          0xF0,0x10,0x00,0x00,0x02,0x03,0x03,0xFF,
 107          0xFF,0xFF,0x05,0x05,0x84,0xE4,0xFF,0x3F,
 108          0x3F,0xFC,0xE4,0x87,0x07,0x04,0x04,0x04,
 109          
 110          
 111          /*--  文字:  乐  --*/
 112          0x00,0x00,0x00,0xF0,0xFC,0xFC,0x0C,0x04,
 113          0x04,0x04,0xF4,0xF4,0x14,0x06,0x06,0x06,
 114          0x84,0x80,0x00,0x00,0x00,0x00,0x81,0xC3,
 115          0xE3,0x71,0x3D,0x1D,0x09,0x01,0xFF,0xFF,
 116          0x09,0x19,0x39,0xF1,0xE1,0xC1,0x01,0x00,
 117          
C51 COMPILER V9.01   MAIN                                                                  07/20/2017 17:00:55 PAGE 3   

 118          
 119          /*--  文字:  哦  --*/
 120          0x00,0xF8,0xF8,0x08,0xF8,0xF8,0xF8,0x48,
 121          0xFC,0xFC,0xFE,0x46,0x7E,0xFE,0xFE,0x4C,
 122          0x58,0x58,0x40,0x40,0x00,0x7F,0x7F,0x08,
 123          0x1F,0x1F,0x1F,0x18,0xFF,0xFF,0xFF,0x86,
 124          0xC2,0xFF,0x7F,0xFE,0xCF,0xC7,0xC2,0x00,
 125          
 126          //-- ！ --
 127          0x00,0x00,0x00,0x00,0x78,0xF8,0xF8,0xF8,
 128          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 129          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 130          0xE0,0xEF,0xEF,0xE1,0x00,0x00,0x00,0x00,
 131          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 132          
 133          //-- ！ --
 134          0x00,0x00,0x00,0x00,0x78,0xF8,0xF8,0xF8,
 135          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 136          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 137          0xE0,0xEF,0xEF,0xE1,0x00,0x00,0x00,0x00,
 138          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 139          
 140          };
 141          
 142          /*****函数声明*****/
 143          void display1(void);
 144          void display2(void);
 145          void display3(void);
 146          void display4(void);
 147          
 148          /*****n（us）延时子程序*****/
 149          void DelayUs(uint N)
 150          {
 151   1      uint x;
 152   1      for(x=0; x<=N;x++);
 153   1      }
 154          
 155          /*****中断服务程序*****/
 156          void intersvr0(void) interrupt 0 using 1
 157          {
 158   1      KY=~KY;      //每个摇动来回水银开关会在摆幅两端分别产生下降沿中断，只提取其中一次（从左向右摇才显示）
 159   1      if(KY==0)
 160   1      {
 161   2        num++;     //计算中断次数
 162   2        switch(pic)      //选择画面
 163   2        {
 164   3         case 0:{display1();}break;
 165   3         case 1:{display2();}break;
 166   3         case 2:{display3();}break;
 167   3         case 3:{display4();}break;
 168   3         default:{display1();}  
 169   3        }
 170   2          }
 171   1      }
 172          
 173          /*****显示子程序1（汉字）*****/
 174          void display1(void)
 175          {
 176   1      uchar i;
 177   1      if(num>10){disp++;num=0;}     //12个汉字分为3次显示完（每次显示4个），每中断10次切换
 178   1      if(disp>2)disp=0;
 179   1        DelayUs(5200);     //此处延时时间依各硬件差别而各不相同，试着调整使得显示内容居中即可
C51 COMPILER V9.01   MAIN                                                                  07/20/2017 17:00:55 PAGE 4   

 180   1      for(i=0;i<64;i++)
 181   1      {
 182   2           P0=~hanzi[disp*160+i*2];
 183   2           P2=~hanzi[disp*160+i*2+1];
 184   2           DelayUs(100);
 185   2      }
 186   1      }
 187          
 188          /*****显示子程序2（LOVE）*****/
 189          void display2(void)
 190          {
 191   1      uchar i;
 192   1      DelayUs(4000);
 193   1      for(i=0;i<64;i++)
 194   1      {
 195   2           P0=~love[i*2];
 196   2           P2=~love[i*2+1];
 197   2           DelayUs(120);
 198   2      }
 199   1      }
 200          
 201          /*****显示子程序3（心形图案）*****/
 202          void display3(void)
 203          {
 204   1      uchar i;
 205   1        DelayUs(4000);
 206   1      for(i=0;i<64;i++)
 207   1      {
 208   2           P0=~loveyou[i*2];
 209   2           P2=~loveyou[i*2+1];
 210   2           DelayUs(120);
 211   2      }
 212   1      }
 213          
 214          /*****显示子程序4（呵呵o(∩_∩)o图案）*****/
 215          void display4(void)
 216          {
 217   1      uchar i;
 218   1      DelayUs(4000);
 219   1      for(i=0;i<64;i++)
 220   1      {
 221   2           P0=~hehe[i*2];
 222   2           P2=~hehe[i*2+1];
 223   2           DelayUs(120);
 224   2      }
 225   1      }
 226          
 227          /*****主函数*****/
 228          void main(void)
 229          {
 230   1      IT0=1;
 231   1      EX0=1; 
 232   1      EA=1;      //开中断，下降沿中断
 233   1      KY=0;
 234   1      while(1)     //主程序中只检测按键
 235   1      {
 236   2        if(KEY==0)     //画面切换键按下
 237   2        {
 238   3        DelayUs(10000);     //按键去抖
 239   3        if(KEY==0);
 240   3        pic++;}
 241   2        if(pic>3)pic=0;
C51 COMPILER V9.01   MAIN                                                                  07/20/2017 17:00:55 PAGE 5   

 242   2      }
 243   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    376    ----
   CONSTANT SIZE    =    864    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      4    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
